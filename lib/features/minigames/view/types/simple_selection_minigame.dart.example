import 'package:flutter/material.dart';
import '../../minigame_core.dart';

/// Ejemplo de cómo implementar un minijuego usando el patrón factory
/// Este archivo demuestra el patrón pero SimpleSelectionMinigame
/// NO está destinado a ser implementado aún (viene en una issue futura)
///
/// Para implementar un minijuego:
/// 1. Extender MinigameBase
/// 2. Implementar tu lógica del juego
/// 3. Registrarlo con MinigameFactory (ver el final del archivo)

class SimpleSelectionMinigame extends MinigameBase {
  const SimpleSelectionMinigame({
    super.key,
    required super.onComplete,
    required super.minigameData,
  });

  @override
  State<SimpleSelectionMinigame> createState() => _SimpleSelectionMinigameState();
}

class _SimpleSelectionMinigameState extends State<SimpleSelectionMinigame> {
  int attempts = 0;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Selección Simple'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text('Intentos: $attempts'),
            const SizedBox(height: 32),
            ElevatedButton(
              onPressed: () {
                setState(() => attempts++);
                // Cuando el juego se complete, llamar:
                widget.onComplete(true, attempts);
              },
              child: const Text('Completar Juego'),
            ),
          ],
        ),
      ),
    );
  }
}

// Registrar este minijuego con el factory
// Esto debe ser llamado durante la inicialización de la app
void registerSimpleSelectionMinigame() {
  MinigameFactory.register(
    MinigameType.simpleSelection,
    ({required onComplete, required minigameData}) => SimpleSelectionMinigame(
      onComplete: onComplete,
      minigameData: minigameData,
    ),
  );
}
